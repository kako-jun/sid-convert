# sid-convert プロジェクト概要

## プロジェクト名
**sid-convert** - MIDI Bass Track Extractor

## 目的
MIDIファイルからベースパートを抽出し、YAML形式で出力するCLIツール。
sid-note（指板変換ツール）での利用を前提とした、人間可読なフォーマットでベース音情報を提供する。

## 背景
- ピアノのMIDI演奏データからベースパートのみを抽出したい
- 抽出したベース音情報をsid-noteで指板情報に変換する
- テンポ変化や転調はベース演奏には重要度が低い

## ターゲットユーザー
- ベース演奏の練習をする人
- MIDIファイルからベースラインを抽出したい音楽家
- 自動演奏システムの開発者

## 主要機能

### 1. 自動ベーストラック検出
- トラック名に「Bass」を含むトラックを検出
- 音域が低音範囲（E1～G3）のトラックを検出
- 検出精度：ベース音域のノートが70%以上含まれる場合

### 2. ノート変換
- **MIDIノート番号 → 音名**
  - 例：28 → E1, 40 → E2, 55 → G3
  - シャープ記法を使用（C#, F#など）
- **Tick数 → 音価**
  - whole（全音符：4拍）
  - half（2分音符：2拍）
  - quarter（4分音符：1拍）
  - eighth（8分音符：0.5拍）

### 3. YAML出力
```yaml
track: "Bass"
notes:
  - start: 0
    length: quarter
    pitch: E2
  - start: 480
    length: eighth
    pitch: F#2
```

## 技術スタック
- **言語**: Rust (安全性、パフォーマンス)
- **MIDI解析**: midly 0.5
- **シリアライゼーション**: serde 1.0 + serde_yaml 0.9
- **CLI**: clap 4.5

## スコープ

### 含まれる機能
- ベーストラック自動検出
- 音程・音価変換
- YAML出力
- CLI引数によるトラック選択

### 含まれない機能（意図的に除外）
- テンポ変化の追跡（ベースには影響が少ない）
- 転調の検出（ベースには影響が少ない）
- フレット情報の計算（sid-noteが担当）
- 16分音符以下の細かい音価（必要性が低い）
- 付点音符（基本的な音価で十分）

## 将来の拡張可能性
- ベロシティ情報の出力（音の強弱）
- 複数トラックの同時出力
- JSON/XML形式のサポート
- ベース特有の奏法情報（スライド、ハンマリング等）の検出
